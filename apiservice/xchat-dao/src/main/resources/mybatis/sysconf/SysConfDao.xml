<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.juxiao.xchat.dao.sysconf.SysConfDao">
    <resultMap id="SysConfResultMap" type="com.juxiao.xchat.dao.sysconf.dto.SysConfDTO">
        <id column="config_id" property="configId" jdbcType="VARCHAR"/>
        <result column="config_name" property="configName" jdbcType="VARCHAR"/>
        <result column="config_value" property="configValue" jdbcType="VARCHAR"/>
        <result column="name_space" property="nameSpace" jdbcType="VARCHAR"/>
        <result column="config_status" property="configStatus" jdbcType="TINYINT"/>
    </resultMap>
    <select id="getSysConf" parameterType="string" resultMap="SysConfResultMap">
        <![CDATA[
            SELECT
                `config_id`,
                `config_name`,
                `config_value`,
                `name_space`,
                `config_status`
            FROM
                `sys_conf`
            WHERE
                `config_id` = #{configId}
        ]]>
    </select>
    <select id="getSplashScreen" resultType="com.juxiao.xchat.dao.sysconf.dto.SplashScreenDTO">
        select pic_image pict, pic_url link, pic_type type
        from app_start_pic
        where pic_status = 2 and user_type = #{userType} and now() between start_time and end_time
    </select>
    <update id="updateConfValue">
        <![CDATA[
            UPDATE sys_conf SET config_value = #{value} WHERE config_id = #{configId}
        ]]>
    </update>
</mapper>
