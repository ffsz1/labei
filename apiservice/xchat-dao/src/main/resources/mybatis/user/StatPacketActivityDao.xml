<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.juxiao.xchat.dao.user.StatPacketActivityDao">

    <insert id="save" parameterType="com.juxiao.xchat.dao.user.domain.StatPacketActivityDO">
        <trim prefix="INSERT IGNORE INTO `stat_packet_activity` (" suffix=")" suffixOverrides=",">
            <if test="uid != null">uid,</if>
            <if test="shareCount != null">share_count,</if>
            <if test="sharePacketCount != null">share_packet_count,</if>
            <if test="latestShareDate != null">latest_share_date,</if>
            <if test="packetCount != null">packet_count,</if>
            <if test="registerCout != null">register_cout,</if>
            <if test="todayRegisterCount != null">today_register_count,</if>
            <if test="latestRegisterDate != null">latest_register_date,</if>
            <if test="chargeBonus != null">charge_bonus,</if>
            <if test="todayChargeBonus != null">today_charge_bonus,</if>
            <if test="latestChargeBonusDate != null">latest_charge_bonus_date,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateTime != null">update_time,</if>
        </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
            <if test="uid != null">#{uid,jdbcType=BIGINT},</if>
            <if test="shareCount != null">#{shareCount,jdbcType=INTEGER},</if>
            <if test="sharePacketCount != null">#{sharePacketCount,jdbcType=INTEGER},</if>
            <if test="latestShareDate != null">#{latestShareDate,jdbcType=DATE},</if>
            <if test="packetCount != null">#{packetCount,jdbcType=INTEGER},</if>
            <if test="registerCout != null">#{registerCout,jdbcType=INTEGER},</if>
            <if test="todayRegisterCount != null">#{todayRegisterCount,jdbcType=INTEGER},</if>
            <if test="latestRegisterDate != null">#{latestRegisterDate,jdbcType=DATE},</if>
            <if test="chargeBonus != null">#{chargeBonus,jdbcType=DOUBLE},</if>
            <if test="todayChargeBonus != null">#{todayChargeBonus,jdbcType=DOUBLE},</if>
            <if test="latestChargeBonusDate != null">#{latestChargeBonusDate,jdbcType=DATE},</if>
            <if test="createTime != null">#{createTime,jdbcType=TIMESTAMP},</if>
            <if test="updateTime != null">#{updateTime,jdbcType=TIMESTAMP},</if>
        </trim>
    </insert>

    <update id="update" parameterType="com.juxiao.xchat.dao.user.domain.StatPacketActivityDO">
        <![CDATA[ UPDATE `stat_packet_activity` ]]>
        <set>
            <if test="shareCount != null">
                share_count = #{shareCount,jdbcType=INTEGER},
            </if>
            <if test="sharePacketCount != null">
                share_packet_count = #{sharePacketCount,jdbcType=INTEGER},
            </if>
            <if test="latestShareDate != null">
                latest_share_date = #{latestShareDate,jdbcType=DATE},
            </if>
            <if test="packetCount != null">
                packet_count = #{packetCount,jdbcType=INTEGER},
            </if>
            <if test="registerCout != null">
                register_cout = #{registerCout,jdbcType=INTEGER},
            </if>
            <if test="todayRegisterCount != null">
                today_register_count = #{todayRegisterCount,jdbcType=INTEGER},
            </if>
            <if test="latestRegisterDate != null">
                latest_register_date = #{latestRegisterDate,jdbcType=DATE},
            </if>
            <if test="chargeBonus != null">
                charge_bonus = #{chargeBonus,jdbcType=DOUBLE},
            </if>
            <if test="todayChargeBonus != null">
                today_charge_bonus = #{todayChargeBonus,jdbcType=DOUBLE},
            </if>
            <if test="latestChargeBonusDate != null">
                latest_charge_bonus_date = #{latestChargeBonusDate,jdbcType=DATE},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime,jdbcType=TIMESTAMP},
            </if>
        </set>
        <![CDATA[ WHERE uid = #{uid,jdbcType=BIGINT} ]]>
    </update>

    <resultMap id="StatPacketActivityResultMap" type="com.juxiao.xchat.dao.user.dto.StatPacketActivityDTO">
        <id column="uid" property="uid" jdbcType="BIGINT"/>
        <result column="share_count" property="shareCount" jdbcType="INTEGER"/>
        <result column="share_packet_count" property="sharePacketCount" jdbcType="INTEGER"/>
        <result column="latest_share_date" property="latestShareDate" jdbcType="DATE"/>
        <result column="packet_count" property="packetCount" jdbcType="INTEGER"/>
        <result column="register_cout" property="registerCout" jdbcType="INTEGER"/>
        <result column="today_register_count" property="todayRegisterCount" jdbcType="INTEGER"/>
        <result column="latest_register_date" property="latestRegisterDate" jdbcType="DATE"/>
        <result column="charge_bonus" property="chargeBonus" jdbcType="DOUBLE"/>
        <result column="today_charge_bonus" property="todayChargeBonus" jdbcType="DOUBLE"/>
        <result column="latest_charge_bonus_date" property="latestChargeBonusDate" jdbcType="DATE"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
    </resultMap>

    <select id="getUserPacketActivity" parameterType="java.lang.Long" resultMap="StatPacketActivityResultMap">
        <![CDATA[
        SELECT
          uid,
          share_count,
          share_packet_count,
          latest_share_date,
          packet_count,
          register_cout,
          today_register_count,
          latest_register_date,
          charge_bonus,
          today_charge_bonus,
          latest_charge_bonus_date,
          create_time,
          update_time
        FROM
          `stat_packet_activity`
        WHERE
          uid = #{uid,jdbcType=BIGINT}
        ]]>
    </select>

    <select id="listUsersPacketActivity" parameterType="java.util.List" resultMap="StatPacketActivityResultMap">
        <![CDATA[
        SELECT
          uid,
          share_count,
          share_packet_count,
          latest_share_date,
          packet_count,
          register_cout,
          today_register_count,
          latest_register_date,
          charge_bonus,
          today_charge_bonus,
          latest_charge_bonus_date,
          create_time,
          update_time
        FROM
          `stat_packet_activity`
        WHERE
          uid IN
        ]]>
        <foreach item="item" index="index" collection="uids" open="(" separator="," close=")">
            #{item}
        </foreach>
        <![CDATA[ ORDER BY uid ]]>
    </select>
</mapper>