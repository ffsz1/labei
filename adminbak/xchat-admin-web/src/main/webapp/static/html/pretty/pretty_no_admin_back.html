<style>
    .bar1,.bar2{
        margin-bottom: 10px;
    }
    label.col-sm-1{
        padding:0;
        line-height: 30px;
        text-align:right;
        /*padding-right: 4px;*/
    }
    label.col-sm-1{
        padding:0;
        line-height: 30px;
        text-align:right;
        /*padding-right: 4px;*/
    }
    input,select{
        margin-left: 8px;
        margin-right: 8px;
    }
    #btnSearch{
        margin-left: 36px;
    }
    .record{
        margin-top: 10px;
    }
    .record .title{
        font-size:16px;
    }


</style>

<section class="content">
    <div class="box box-primary">
        <div class="box-body">
            <section class="content-header">
                <h1 id="itemTitle"></h1>
            </section>
            <section class="content">
                <div id="table"></div>
                <div id="toolbar">
                    <form class="form-horizontal">

                    <div class="form-group">
                        <label for="goodNum" class="col-sm-3 control-label">靓号:</label>
                        <div class="col-sm-3">
                            <div><input type="text"  name="goodNum" id="goodNum" ></div>
                        </div>
                        <label for="oldNum" class="col-sm-3 control-label">使用人ID:</label>
                        <div class="col-sm-3">
                            <div><input type="text" name="oldNum" id="oldNum" ></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="status" class="col-sm-3 control-label">状态:</label>
                        <div class="col-sm-3">
                            <select name="status" id="status" class="input-m">
                                <option value="-1">全部</option>
                                <option value="0">未使用</option>
                                <option value="1">使用中</option>
                            </select>
                        </div>
                        <label for="status" class="col-sm-3 control-label">来源:</label>
                        <div class="col-sm-3">
                            <select name="origin" id="origin" class="input-m">
                                <option value="0">全部</option>
                                <option value="1">活动</option>
                                <option value="2">贵族</option>
                                <option value="3">运营需要赠送</option>
                            </select>
                        </div>
                    </div>
                    </form>

                    <form class="form-horizontal">
                        <div class="form-group">
                            <label for="useDate" class="col-sm-3 control-label">使用时间:</label>
                            <div class="col-sm-8">
                                <input type="text" id="useDate" type="date" name="useDate" class="form-control validate[required]">
                            </div>
                        </div>

                        <div class="form-group">
                        <label for="outDate" class="col-sm-3 control-label">到期时间:</label>
                        <div class="col-sm-8">
                            <input type="text" id="outDate" type="date" name="outDate" class="form-control validate[required]">
                        </div>
                        </div>

                        <div class="form-group">
                                <label for="createDate" class="col-sm-3 control-label">创建时间:</label>
                                <div class="col-sm-8">
                                    <input type="text" id="createDate" type="date" name="createDate" class="form-control validate[required]">
                            </div>
                        </div>
                    </form>

                    <button id="btnSearch" class="btn btn-sm btn-primary">查询</button>
                    <button id="add" class="btn btn-default">
                        <i class="glyphicon glyphicon-plus"></i>新建靓号
                    </button>
                </div>
            </section>
        </div>
    </div>
</section>

<!--增加对话框-->
<div class="modal fade" id="addPrettyNoModel" tabindex="-1" role="dialog" aria-labelledby="modalLabel2">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">x</span></button>
                <h4 class="modal-title" id="addModalLabel">新增靓号</h4>
            </div>
            <div class="modal-body">
                <form id="addPrettyNoForm" class="form-horizontal">
                    <div class="form-group">
                        <label for="prettyErbanNo" class="col-sm-3 control-label">请输入靓号：</label>
                        <div class="col-sm-3">
                            <input type="text" class="form-control validate[required]" name="prettyErbanNo" id="prettyErbanNo"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="setUser" class="col-sm-3 control-label">同时设置使用人:</label>
                        <div class="col-sm-8">
                            <input id='setUser' type='checkbox' name='setUser' />
                        </div>
                    </div>

                    <div class="form-group"  id ="mmm">
                        <label for="useId" class="col-sm-3 control-label">请输入使用人ID:</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control validate[required]" name="useId" id="useId"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="forever" class="col-sm-3 control-label">永久有效</label>
                        <div class="col-sm-8">
                            <input id='forever'  type='radio' name='exchange' value="1" checked="checked" onclick="rdoClick(this);"/>
                        </div>
                    </div>

                    <div class="form-group"  >
                        <label for="limited" class="col-sm-3 control-label">使用有效期</label>
                        <div class="col-sm-8">
                            <input id='limited' type='radio' name='exchange'  value="2" onclick="rdoClick(this);" />
                        </div>
                    </div>
                    <input type="hidden" id="effectType" />

                    <div class="form-group"  id ="nnn">
                        <label for="startDate" class="col-sm-3 control-label">开始日期：</label>
                        <div class="col-sm-3">
                            <input type="text" id="startDate" type="date" name="startDate" class="form-control validate[required]">
                        </div>
                    </div>

                    <div class="form-group"  id ="ooo">
                        <label for="endDate" class="col-sm-3 control-label">结束日期：</label>
                        <div class="col-sm-3">
                            <input type="text" id="endDate" type="date" name="endDate" class="form-control validate[required]">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="userFor" class="col-sm-3 control-label">选择靓号使用来源：</label>
                        <div class="col-sm-8">
                            <select name="userFor" id="userFor" class="col-sm-3">
                                <option value="1">活动</option>
                                <option value="2">贵族</option>
                                <option value="3">运营需要赠送</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="addRemark" class="col-sm-3 control-label">备注:</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="addRemark" id="addRemark">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="addSave">新建</button>
            </div>
        </div>
    </div>
</div>

<!--使用对话框-->
<div class="modal fade" id="usePrettyNoModel" tabindex="-1" role="dialog" aria-labelledby="modalLabel2">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">x</span></button>
                <h4 class="modal-title" id="useModalLabel">使用靓号</h4>
            </div>
            <div class="modal-body">
                <form id="usePrettyNoForm" class="form-horizontal">
                    <div class="form-group">
                        <label for="beautyErbanNo" class="col-sm-3 control-label">靓号：</label>
                        <div class="col-sm-3">
                            <input type="text" class="form-control validate[required]" disabled ="disabled" name="beautyErbanNo" id="beautyErbanNo">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="usePeople" class="col-sm-3 control-label">请输入使用人ID:</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control validate[required]" name="usePeople" id="usePeople"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="yongJiu" class="col-sm-3 control-label">永久有效</label>
                        <div class="col-sm-8">
                            <input id='yongJiu' type='radio' name='exchange' value="1" checked="checked" onclick="doClick(this);"/>
                        </div>
                    </div>

                    <div class="form-group" >
                        <label for="xianShi" class="col-sm-3 control-label">使用有效期</label>
                        <div class="col-sm-8">
                            <input id='xianShi' type='radio' name='exchange'  value="2" onclick="doClick(this);" />
                        </div>
                    </div>
                    <input type="hidden" id="effectDate" />

                    <div class="form-group"  id ="aaa">
                            <label for="startUseDate" class="col-sm-3 control-label">开始日期：</label>
                            <div class="col-sm-3">
                                <input type="text" id="startUseDate" type="date" name="startUseDate" class="form-control validate[required]"/>
                            </div>
                    </div>

                    <div class="form-group"  id ="bbb">
                            <label for="endUseDate" class="col-sm-3 control-label">结束日期：</label>
                            <div class="col-sm-3">
                                <input type="text" id="endUseDate" type="date" name="endUseDate" class="form-control validate[required]"/>
                            </div>
                    </div>

                    <div class="form-group">
                        <label for="laiYuan" class="col-sm-3 control-label">选择靓号使用来源：</label>
                        <div class="col-sm-8">
                            <select name="laiYuan" id="laiYuan" class="col-sm-3">
                                <option value="1">活动</option>
                                <option value="2">贵族</option>
                                <option value="3">运营需要赠送</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="remark" class="col-sm-3 control-label">备注:</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control" name="remark" id="remark">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="useSave">确认使用</button>
            </div>
        </div>
    </div>
</div>


<!--删除-->
<div class="modal fade" id="delcfmModel">
    <div class="modal-dialog">
        <div class="modal-content message_align">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">提示信息</h4>
            </div>
            <div class="modal-body">
                <p>您确认要删除吗？</p>
            </div>
            <div class="modal-footer">
                <input type="hidden" id="url"/>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="doDelete">确认</button>
            </div>
        </div>
    </div>
</div>

<!--解绑-->
<div class="modal fade" id="jieBangCfmModel">
    <div class="modal-dialog">
        <div class="modal-content message_align">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">提示信息</h4>
            </div>
            <div class="modal-body">
                <p>确认解绑？
                    解绑后，使用人会恢复原ID？</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="doJieBang">确认</button>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#table').bootstrapTable('destroy');
        $('#table').bootstrapTable({
            columns: [
                {field: 'prettyId', title: 'ID', align: 'center', valign: 'middle', width: '0%'},
                {field: 'prettyErbanNo', title: '靓号ID', align: 'center', valign: 'middle', width: '10%'},
                {
                    field: 'status',
                    title: '状态',
                    align: 'center',
                    width: '10%',
                    valign: 'middle',
                    formatter: function (val, row, index) {
                        switch (val) {
                            case 1:
                                return '使用中';
                                break;
                            case 0:
                                return '未使用';
                                break;
                        }
                    }
                },

                {
                    field: 'useFor',
                    title: '来源',
                    align: 'center',
                    width: '10%',
                    valign: 'middle',
                    formatter: function (val, row, index) {
                        switch (val) {
                            case 1:
                                return '活动';
                                break;
                            case 2:
                                return '贵族';
                                break;
                            case 3:
                                return '运营需要赠送';
                                break;
                        }
                    }
                },
                {field: 'userErbanNo', title: '使用人ID', align: 'center', valign: 'middle', width: '10%'},
                {field: 'prettyDesc', title: '备注', align: 'center', valign: 'middle', width: '10%'},
                {
                    field: 'startValidTime',
                    title: '使用时间',
                    align: 'center',
                    width: '10%',
                    valign: 'middle',
                    formatter: function (val, row, index) {
                        if (val) {
                            var date = new Date(val);
                            return date.format("yyyy-MM-dd HH:mm:ss");
                        } else {
                            return '-';
                        }
                    }
                },
                {
                    field: 'endValidTime',
                    title: '到期时间',
                    align: 'center',
                    width: '10%',
                    valign: 'middle',
                    formatter: function (val, row, index) {
                        if (val) {
                            var date = new Date(val);
                            return date.format("yyyy-MM-dd HH:mm:ss");
                        } else {
                            return '-';
                        }
                    }
                },
                {
                    field: 'createTime',
                    title: '创建时间',
                    align: 'center',
                    width: '10%',
                    valign: 'middle',
                    formatter: function (val, row, index) {
                        if (val) {
                            var date = new Date(val);
                            return date.format("yyyy-MM-dd HH:mm:ss");
                        } else {
                            return '-';
                        }
                    }
                },
                {
                 field: 'tmp',
                 title: '操作',
                 align: 'center',
                 width: '20%',
                 valign: 'middle',
                 formatter: function (val, row, index) {
                 var key = row.prettyId;
                     if(row.status==1){
                         return  "<button class='btn btn-sm btn-success opt-unBound'  data-id=" + key + " >解绑</button> &nbsp;&nbsp;" +
                                 "<button class='btn btn-sm btn-success opt-del'  data-id=" + key + " >删除</button>";
                     }if(row.status==0){
                         return "<button class='btn btn-sm btn-success opt-use'  data-id=" + key + ">使用</button>&nbsp;&nbsp;"+
                                 "<button class='btn btn-sm btn-success opt-unBound'  data-id=" + key + " >解绑</button> &nbsp;&nbsp;" +
                                 "<button class='btn btn-sm btn-success opt-del'  data-id=" + key + " >删除</button>";
                        }
                    }
                 }
            ],
            cache: false,
            striped: true,
            showRefresh: false,
            pageSize: 10,
            pagination: true,
            pageList: [10, 20, 30, 50],
            sidePagination: "server", //表示服务端请求
            queryParamsType: "undefined",
            queryParams: function queryParams(params) {   //设置查询参数
                var param = {
                    pageSize: params.pageSize,
                    pageNum: params.pageNumber,
                    goodNoId: $('#goodNum').val(),
                    oldNo:$('#oldNum').val(),
                    status: $('#status').val(),
                    origin: $('#origin').val(),
                    useDate: $('#useDate').val(),
                    outDate: $('#outDate').val(),
                    createDate: $('#createDate').val()
                };
                return param;
            },
            uniqueId: 'code',
            toolbar: '#toolbar',
            url: '/admin/goodNoAdmin/list.action',
            onLoadSuccess: function () {  //加载成功时执行
                console.log("load success");
            },
            onLoadError: function () {  //加载失败时执行
                console.log("load fail");
            }
        })
    })

    /*查询刷新*/
    $('#btnSearch').on('click', function () {
        TableHelper.doRefresh('#table');
    })

    /*保存*/
    $('#addSave').on('click', function () {
        if ($('#addPrettyNoForm').validationEngine('validate')) {
            $.ajax({
                type: "post",
                url: "/admin/savePrettyNo.action",
                data: {
                    prettyErbanNo: $("#prettyErbanNo").val(),
                    userId:$("#useId").val(),
                    isValid:$("#setUser").prop('checked')?1:0,
                    isEffectType: $('#effectType').val(),
                    startDate: $('#startDate').val(),
                    endDate: $('#endDate').val(),
                    origin: $('#userFor').val(),
                    addRemark:$('#addRemark').val()
                },
                dataType: 'json',
                success: function (data) {
                    if (data == 1) {
                        $('#addPrettyNoModel').modal('hide');
                        $("#tipMsg").text("保存成功");
                        $("#tipModal").modal('show');
                        TableHelper.doRefresh("#table");
                    } else if(data == 2){
                        $('#addPrettyNoModel').modal('hide');
                        $("#tipMsg").text("保存失败，该拉贝号已存在");
                        $("#tipModal").modal('show');
                    }else if(data == 8){
                        $('#addPrettyNoModel').modal('hide');
                        $("#tipMsg").text("保存失败，该用户已存在靓号，请换一个用户重试");
                        $("#tipModal").modal('show');
                    }
                    else if(data == 11){
                        $('#addPrettyNoModel').modal('hide');
                        $("#tipMsg").text("保存失败，该用户已存在靓号，请换一个用户重试");
                        $("#tipModal").modal('show');
                    }
                    else{
                        $("#tipMsg").text("保存失败，错误码：" + data);
                        $("#tipModal").modal('show');
                    }
                }
            })
        }
    })

    //增加
    $('#add').on('click', function () {
        $('#addPrettyNoForm')[0].reset();
        $('#addPrettyNoModel').modal('show');
        clear();
    })
    function clear () {
        $("#mmm").hide();
        $("#nnn").hide();
        $("#ooo").hide();
    }

    //使用弹窗
    $('#table').on('click','.opt-use',function () {
        var key = parseInt($(this).data('id'));
        $("#prettyId").val(key);
        console.log(key,typeof key);
        $("#rowId").val(key);
        $("#useSave").data('id',key);
        $('#usePrettyNoForm')[0].reset();
        $("#usePrettyNoModel").modal('show');
        $.ajax({
            type: 'post',
            url: '/admin/getUsePrettyNo.action',
            data: {'rowId':key},
            dataType: 'json',
            success: function (data) {
                if(data){
                    var pretty =data.prettyErbanNo;
                    console.log(data,typeof data);
                    var start=data.startDate;
                    var end=data.endDate;
                    $("#beautyErbanNo").val(pretty);
                    $("#startUseDate").val(start);
                    $("#endUseDate").val(end);
                }
            }
        })
        })


    //使用弹窗保存
    $("#useSave").click(function() {
        if ($('#usePrettyNoForm').validationEngine('validate')){
            $.ajax({
                type: 'post',
                url: '/admin/usePrettyNo.action',
                data: {
                    rowId:$(this).data('id'),
                    beautyNo:$('#beautyErbanNo').val(),
                    userId:$('#usePeople').val(),
                    startDate: $('#startUseDate').val(),
                    endDate: $('#endUseDate').val(),
                    origin: $('#laiYuan').val(),
                    remark:$('#remark').val(),
                    isEffectType: $('#effectDate').val()
                },
                dataType: 'json',
                success: function (data) {
                    if(data == 1){
                        $("#tipMsg").text("使用成功");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                        $(".opt-use").attr("disabled", true);
                        TableHelper.doRefresh("#table");
                    }else if(data == 2){
                        $("#tipMsg").text("使用失败，该靓号已经被使用");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }
                    else if(data == 3){
                        $("#tipMsg").text("使用失败，时间期限不正确,请重新设置时间");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }
                    else if(data == 4){
                        $("#tipMsg").text("使用失败，该靓号仅作为活动使用");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }
                    else if(data == 5){
                        $("#tipMsg").text("使用失败，该靓号仅为贵族使用");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }
                    else if(data == 6){
                        $("#tipMsg").text("使用失败，该靓号为运营赠送使用");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }
                    else if(data == 7){
                        $("#tipMsg").text("使用失败，不可重复使用");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }
                    else if(data == 8){
                        $("#tipMsg").text("使用失败，当前用户已存在靓号，请换一个用户重试");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }else if(data == 11){
                        $("#tipMsg").text("使用失败，目标拉贝号不存在");
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }
                    else {
                        $("#tipMsg").text("使用失败，错误码：" + data);
                        $("#tipModal").modal('show');
                        $('#usePrettyNoForm')[0].reset();
                        $("#usePrettyNoModel").modal('hide');
                    }
                }
            })
        }

    })

    //解绑

    $("#doJieBang").click(function(){
        $.ajax({
            type: 'post',
            url: '/admin/unBundlingPrettyNo.action',
            data: {'rowId':$(this).data('id')},
            dataType: 'json',
            success: function(data){
                if(data == 1){
                    $("#tipMsg").text("解绑成功");
                    $("#tipModal").modal('show');
                    $("#jieBangCfmModel").modal('hide');
                    TableHelper.doRefresh("#table");
                }else if(data == 2) {
                    $("#tipMsg").text("该账号未绑定，无需解绑！");
                    $("#tipModal").modal('show');
                } else {
                    $("#tipMsg").text("解绑失败，错误码：" + data);
                    $("#tipModal").modal('show');
                }
            }
        })
    })


    //删除
    $("#doDelete").click(function(){
        $.ajax({
            type: 'post',
            url: '/admin/deletePrettyNo.action',
            data: {'rowId':$(this).data('id')},
            dataType: 'json',
            success: function(data){
                if(data == 1){
                    $("#tipMsg").text("删除成功");
                    $("#tipModal").modal('show');
                    $('#delcfmModel').modal('hide');
                    TableHelper.doRefresh("#table");
                } else {
                    $("#tipMsg").text("删除失败，错误码：" + data);
                    $("#tipModal").modal('show');
                }
            }
        })
    })


    $('#table').on('click','.opt-del',function () {
        var key = parseInt($(this).data('id'));
        $("#doDelete").data('id',key);
        $("#rowId").val(key);
        console.log(key,typeof key);
        $('#delcfmModel').modal();
    })


    $('#table').on('click','.opt-unBound',function () {
        var key = parseInt($(this).data('id'));
        $("#doJieBang").data('id',key);
        $("#rowId").val(key);
        console.log(key,typeof key);
        $('#jieBangCfmModel').modal();
    })

    /*function urlSubmit(){
        var url=$.trim($("#url").val());//获取会话中的隐藏属性URL
        window.location.href=url;
    }*/

    var _input = $("input:checkbox");
    _input.click(function(){
        if($("#setUser").prop('checked')){
            $("#mmm").show();
        } else{
            $("#mmm").hide();
        }
    })

    function rdoClick(obj)
    {
        if(obj.id == "forever")
        {
            $("#nnn").hide();
            $("#ooo").hide();
            $('#effectType').val($('#forever').val());
        }
        if(obj.id == "limited")
        {
            $("#nnn").show();
            $("#ooo").show();
            $('#effectType').val($('#limited').val());
        }
    }

    function doClick(obj)
    {
        if(obj.id == "yongJiu")
        {
            $("#aaa").hide();
            $("#bbb").hide();
            $('#effectDate').val($('#yongJiu').val());
        }
        if(obj.id == "xianShi")
        {
            $("#aaa").show();
            $("#bbb").show();
            $('#effectDate').val($('#xianShi').val());
        }
    }

    var picker1 = $("#startDate").datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        autoclose: true,
        startDate: new Date()
    });
    var picker2 = $("#endDate").datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        autoclose: true,
        startDate: new Date()
    });
    picker1.on('changeDate', function () {
        var date = $('#startDate').datetimepicker('getDate');
        picker2.datepicker('setStartDate',date);
    });
    picker2.on('changeDate', function () {
        var date = $('#endDate').datetimepicker('getDate');
        picker1.datepicker('setEndDate',date);
    });

    var picker1 = $("#startUseDate").datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        startDate: new Date(),
        autoclose: true,

    });
    var picker2 = $("#endUseDate").datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        autoclose: true,
        startDate: new Date()
    });
    picker1.on('changeDate', function () {
        var date = $('#startUseDate').datetimepicker('getDate');
        picker2.datepicker('setStartDate',date);
    });
    picker2.on('changeDate', function () {
        var date = $('#endUseDate').datetimepicker('getDate');
        picker1.datepicker('setEndDate',date);
    });
    /*var start= $("#startDate").val();
    var end= $("#endDate").val();
    if(end<start){
        $("#tipMsg").text("结束时间必须大于开始时间");
        $("#tipModal").modal('show');
    }*/
    var picker1 = $("#useDate").datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        autoclose: true,
        startDate: new Date()
    });
    var picker2 = $("#outDate").datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        autoclose: true,
        startDate: new Date()
    });
    picker1.on('changeDate', function () {
        var date = $('#startDate').datetimepicker('getDate');
        picker2.datepicker('setStartDate',date);
    });
    picker2.on('changeDate', function () {
        var date = $('#endDate').datetimepicker('getDate');
        picker1.datepicker('setEndDate',date);
    });

    var picker3 = $("#createDate").datetimepicker({
        format: 'yyyy-mm-dd hh:ii:ss',
        autoclose: true
    });


    $(document).ready( function(){
        $("#mmm").hide();
        $("#nnn").hide();
        $("#ooo").hide();
        $("#aaa").hide();
        $("#bbb").hide();
        $('#effectType').val($('#forever').val());
        $('#effectDate').val($('#yongJiu').val());
        }
    );








</script>


