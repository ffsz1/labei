<!-- jQuery 2.2.0 -->
<!--<script src="/static/js/jQuery-2.2.0.min.js"></script>-->
<!-- Bootstrap 3.3.5 -->
<script src="/static/js/jquery/jquery.min.js"></script>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
<script src="/static/plugins/kindeditor-4.1.11/kindeditor-all.js"></script>
<script src="/static/plugins/kindeditor-4.1.11/plugins/lineheight/lineheight.js"></script>
<script src="/static/plugins/kindeditor-4.1.11/lang/zh-CN.js"></script>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--&lt;!&ndash;[if lt IE 9]>-->
<!--<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>-->
<!--<![endif]&ndash;&gt;-->
<!-- AdminLTE App -->
<script src="/static/AdminLTE/js/app.min.js"></script>
<script src="/static/js/jquery/jquery.form.js"></script>
<!-- FastClick -->
<script src="/static/plugins/fastclick/fastclick.js"></script>
<!-- Sparkline -->
<script src="/static/plugins/sparkline/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script src="/static/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="/static/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- SlimScroll 1.3.0 -->
<script src="/static/plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- ChartJS 1.0.1 -->
<script src="/static/plugins/chartjs/Chart.min.js"></script>
<script src="/static/plugins/datepicker/bootstrap-datepicker.js"></script>
<script src="/static/plugins/datepicker/locales/bootstrap-datepicker.zh-CN.js"></script>
<script src="/static/plugins/bootstrap-editable/js/bootstrap-editable.min.js"></script>
<script src="/static/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script src="/static/plugins/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="/static/plugins/bootstrap-combobox/bootstrap-combobox.min.js"></script>
<script src="/static/plugins/bootstrap-combobox/bootstrap-combobox-helper.js"></script>
<!-- bootstrap-table -->
<!--<script src="http://cdn.bootcss.com/bootstrap-table/1.10.0/bootstrap-table.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap-table/1.10.0/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="http://cdn.bootcss.com/bootstrap-table/1.10.0/extensions/editable/bootstrap-table-editable.min.js"></script>
<script src="http://cdn.bootcss.com/jquery-validate/1.14.0/jquery.validate.min.js"></script>-->
<script src="/static/plugins/bootstrap-table/bootstrap-table.js"></script>
<script src="/static/plugins/bootstrap-table/extensions/fixed-columns/bootstrap-table-fixed-columns.min.js"></script>
<script src="/static/plugins/bootstrap-table/bootstrap-table-zh-CN.js"></script>
<script src="/static/plugins/bootstrap-table/bootstrap-table-helper.js"></script>
<script src="/static/plugins/jQuery-Validation-Engine/js/jquery.validationEngine.js"></script>
<script src="/static/plugins/jQuery-Validation-Engine/js/languages/jquery.validationEngine-zh_CN.js"></script>
<!-- CK Editor -->
<!--<script src="https://cdn.ckeditor.com/4.4.3/standard/ckeditor.js"></script>-->
<!-- Bootstrap WYSIHTML5 -->
<script src="/static/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<script src="/static/plugins/svga-player-web/svga.min.js"></script>
<script src="/static/js/system-helper.js"></script>
<script src="/static/js/admin/main.js"></script>
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--&lt;!&ndash;[if lt IE 9]>-->
<!--<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>-->
<!--<![endif]&ndash;&gt;-->
<script>
    // 加载菜单
    $.ajax({
        type: "post",
        url: "/admin/menu/getall.action",
        dataType: "json",
        success: function (json) {
            if (json.result == 0) {
                const parents = json.parents;
                $.each(parents, function (n, menu) {
                    let html = '<a href="#"><i class="' + menu.icon + '"></i><span>' + menu.name
                        + '</span><span class="label pull-right bg-yellow" id="ic' + menu.id + '">0</span></a>'
                        + '<ul class="treeview-menu" id="menu' + menu.id + '"></ul></li>';
                    if (n == 0) {
                        html = '<li class="active treeview">' + html;
                    } else {
                        html = '<li class="treeview" style="display: none">' + html;
                    }
                    $("#mainMenu").append(html);
                });

                const childs = json.childs;
                $.each(childs, function (n, menu) {
                    const str = '<li><a href="#" data-url="' + menu.path + '"><i class="' + menu.icon + '"></i>' + menu.name + '</a></li>';
                    $("#menu" + menu.parentid).append(str);
                    const parentHtml = $("#ic" + menu.parentid);
                    parentHtml.text(parseInt(parentHtml.text()) + 1);
                    parentHtml.parent().parent().css("display", "list-item");
                });
            }
        }
    });
    let menuText = null;
    // 点击菜单栏，在右侧加载菜单的URL
    $(document).on("click", '.treeview-menu a', function () {
        var url = $(this).attr("data-url");
        console.log(url);
        menuText = $(this).text();
        $.ajax({
            url: url,
            dataType: "html",
            success: function (html) {
                $("#content").html(html);
                // 设置标题
                if ($("#itemTitle")) {
                    $("#itemTitle").text(menuText);
                }
            },
            error: function (data) {
                $("#content").html("<h3>404&nbsp;&nbsp;The page can not found.</h3>" + data);
            }
        });
    });

    Date.prototype.format = function (formatStr) {
        const date = this;
        /*
        函数：填充0字符
        参数：value-需要填充的字符串, length-总长度
        返回：填充后的字符串
        */
        const zeroize = function (value, length) {
            if (!length) {
                length = 2;
            }
            value = new String(value);
            for (var i = 0, zeros = ''; i < (length - value.length); i++) {
                zeros += '0';
            }
            return zeros + value;
        };
        return formatStr.replace(/"[^"]*"|'[^']*'|\b(?:d{1,4}|M{1,4}|yy(?:yy)?|([hHmstT])\1?|[lLZ])\b/g, function ($0) {
            switch ($0) {
                case 'd':
                    return date.getDate();
                case 'dd':
                    return zeroize(date.getDate());
                case 'ddd':
                    return ['Sun', 'Mon', 'Tue', 'Wed', 'Thr', 'Fri', 'Sat'][date.getDay()];
                case 'dddd':
                    return ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][date.getDay()];
                case 'M':
                    return date.getMonth() + 1;
                case 'MM':
                    return zeroize(date.getMonth() + 1);
                case 'MMM':
                    return ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][date.getMonth()];
                case 'MMMM':
                    return ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'][date.getMonth()];
                case 'yy':
                    return new String(date.getFullYear()).substr(2);
                case 'yyyy':
                    return date.getFullYear();
                case 'h':
                    return date.getHours() % 12 || 12;
                case 'hh':
                    return zeroize(date.getHours() % 12 || 12);
                case 'H':
                    return date.getHours();
                case 'HH':
                    return zeroize(date.getHours());
                case 'm':
                    return date.getMinutes();
                case 'mm':
                    return zeroize(date.getMinutes());
                case 's':
                    return date.getSeconds();
                case 'ss':
                    return zeroize(date.getSeconds());
                case 'l':
                    return date.getMilliseconds();
                case 'll':
                    return zeroize(date.getMilliseconds());
                case 'tt':
                    return date.getHours() < 12 ? 'am' : 'pm';
                case 'TT':
                    return date.getHours() < 12 ? 'AM' : 'PM';
            }
        });
    }
</script>
